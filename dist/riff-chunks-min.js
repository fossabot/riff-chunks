/*
 riff-chunks
 Read and write the chunks of RIFF and RIFX files.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/riff-chunks

 byte-data
 Pack and unpack binary data.
 Copyright (c) 2017-2018 Rafael da Silva Rocha.
 https://github.com/rochars/byte-data

 generic-integer
 Pack and unpack any integer from 1 to 53-Bit.
 Copyright (c) 2018 Rafael da Silva Rocha.
 https://github.com/rochars/generic-integer

 endianness
 Swap endianness in byte arrays.
 Copyright (c) 2017 Rafael da Silva Rocha.
 https://github.com/rochars/endianness

*/
var n="function"==typeof Object.create?Object.create:function(a){function e(){}e.prototype=a;return new e},p;if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{var q;a:{var r={H:!0},t={};try{t.__proto__=r;q=t.H;break a}catch(a){}q=!1}p=q?function(a,e){a.__proto__=e;if(a.__proto__!==e)throw new TypeError(a+" is not extensible");return a}:null}var u=p;
function v(a,e){a.prototype=n(e.prototype);a.prototype.constructor=a;if(u)u(a,e);else for(var c in e)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(e,c);d&&Object.defineProperty(a,c,d)}else a[c]=e[c];a.Ba=e.prototype}
for(var w="function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,c){a!=Array.prototype&&a!=Object.prototype&&(a[e]=c.value)},x="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,y=["Object","assign"],z=0;z<y.length-1;z++){var A=y[z];A in x||(x[A]={});x=x[A]}
var B=y[y.length-1],C=x[B],D=C?C:function(a,e){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var k in d)Object.prototype.hasOwnProperty.call(d,k)&&(a[k]=d[k])}return a};D!=C&&null!=D&&w(x,B,{configurable:!0,writable:!0,value:D});
(function(a){function e(d){if(c[d])return c[d].a;var k=c[d]={ma:d,K:!1,a:{}};a[d].call(k.a,k,k.a,e);k.K=!0;return k.a}var c={};e.B=a;e.o=c;e.f=function(a,c){e.g(a)||Object.defineProperty(a,"a",{configurable:!1,enumerable:!0,get:c})};e.u=function(a){var c=a&&a.ca?function(){return a["default"]}:function(){return a};e.f(c,c);return c};e.g=function(a){return Object.prototype.hasOwnProperty.call(a,"a")};e.A="";return e(e.C=1)})([function(a,e,c){function d(a){var f=l.call(this,a)||this;f.char=a["char"];
f.s=a["float"];f.c=a.base?a.base:10;f.I();return f}var k=new Float32Array(1),g=new Int32Array(k.buffer),b=new Float64Array(1),h=new Uint32Array(b.buffer),l=c(4);v(d,l);d.prototype.M=function(a,f){a=this.read(a,f,{bits:16,offset:2});f=(a&31744)>>10;var b=a&1023;return(f?Math.pow(2,f-15)*(1+b/1024):b/1024*.00006103515625)*(a>>15?-1:1)};d.prototype.N=function(a,f){g[0]=this.read(a,f,{bits:32,offset:4});return k[0]};d.prototype.O=function(a,f){var c=new d({bits:32,offset:4});h[0]=c.read(a,f,{bits:32,
offset:4});h[1]=c.read(a,f+4,{bits:32,offset:4});return b[0]};d.prototype.P=function(a,f){for(var b="",c=0;c<this.offset;)b+=String.fromCharCode(a[f+c]),c++;return b};d.prototype.$=function(a,f,c){b[0]=f;f=new d({bits:32,offset:4,lastByteMask:255});c=f.write(a,h[0],c);return f.write(a,h[1],c)};d.prototype.Z=function(a,f,b){k[0]=f;return b=this.write(a,g[0],b)};d.prototype.Y=function(a,f,b){k[0]=f;var c=g[0];f=c>>16&32768;var h=c>>12&2047;c=c>>23&255;103<=c&&(f=(f|c-112<<10|h>>1)+(h&1));a[b++]=f&255;
a[b++]=f>>>8&255;return b};d.prototype.aa=function(a,f,b){a[b++]=f.charCodeAt(0);return b};d.prototype.I=function(){this.S();this.T();this.s&&(this.min=-Infinity,this.max=Infinity)};d.prototype.S=function(){this.s?16==this.b?this.h=this.M:32==this.b?this.h=this.N:64==this.b&&(this.h=this.O):this.char&&(this.h=this.P)};d.prototype.T=function(){this.s?16==this.b?this.i=this.Y:32==this.b?this.i=this.Z:64==this.b&&(this.i=this.$):this.char&&(this.i=this.aa)};a.a=d},function(a,e,c){function d(a){m.j="RIFX"===
a.chunkId;var b=h.v(a.chunkId,l).concat(h.D(a.chunkSize,m),h.v(a.format,l),k(a.subChunks));if("RIFF"===a.chunkId||"RIFX"===a.chunkId)b=new Uint8Array(b);return b}function k(a){for(var b=[],c=0;c<a.length;)b="LIST"===a[c].chunkId?b.concat(d(a[c])):b.concat(h.v(a[c].chunkId,l),h.D(a[c].chunkSize,m),a[c].chunkData),c++;return b}function g(a){for(var c=[],f=12;f<a.length;)c.push(b(a,f)),f+=8+c[c.length-1].chunkSize;return c}function b(a,b){var c={chunkId:h.m(a.slice(b,b+4),l),chunkSize:h.G(a.slice(b+
4,b+8),m)};"LIST"===c.chunkId?(c.format=h.m(a.slice(8,12),l),c.subChunks=g(a.slice(b,b+c.chunkSize))):c.chunkData=a.slice(b+8,b+8+c.chunkSize);return c}var h=c(2),l=h.J,m=h.V;window.riffChunks=window.riffChunks||{};window.riffChunks.read=function(a){a=[].slice.call(a);var b=h.m(a.slice(0,4),l);m.j="RIFX"===b;return{chunkId:b,chunkSize:h.G(a.slice(4,8),m),format:h.m(a.slice(8,12),l),subChunks:g(a)}};window.riffChunks.write=d},function(a,e,c){function d(a,b,c){var f=[];b.char?f=b.char?a.slice(0,b.offset):
a:Array.isArray(a)||(f=[a]);return g.F(f,g.l(b,void 0===c?10:c))}function k(a,b,c){a=g.w(a.slice(0,b.offset),g.l(b,void 0===c?10:c));return a=b.char?a.slice(0,b.b/8):a[0]}var g=c(3),b=c(0);a.a.D=d;a.a.G=k;a.a.v=function(a,b){return g.F(a,g.l(b,10))};a.a.m=function(a,b){return g.w(a,g.l(b,10))};a.a.Oa=function(a,b,c){c=void 0===c?10:c;for(var f=0,d=0;d<b.length;d++)f+=b[d].offset;if(a.length<f)return[];f=[];for(var g=d=0;d<b.length;)f=f.concat(k(a.slice(g,g+b[d].offset),b[d],c)),g+=b[d].offset,d++;
return f};a.a.Aa=function(a,b,c){c=void 0===c?10:c;if(a.length<b.length)return[];for(var f=[],g=0;g<b.length;g++)f=f.concat(d(a[g],b[g],c));return f};a.a.ea=function(a,c){for(var d,f=0;f<a.length;f++)if(d=k(a.slice(f,f+c.length+1),new b({bits:8*c.length,"char":!0})),d==c)return f;return-1};a.a.ba=b;a.a.J=new b({bits:8,"char":!0});a.a.la=new b({bits:32,"char":!0});a.a.da=new b({bits:1});a.a.pa=new b({bits:2,signed:!0});a.a.Ea=new b({bits:2});a.a.ua=new b({bits:4,signed:!0});a.a.Ia=new b({bits:4});
a.a.za=new b({bits:8,signed:!0});a.a.Na=new b({bits:8});a.a.na=new b({bits:16,signed:!0});a.a.Ca=new b({bits:16});a.a.fa=new b({bits:16,"float":!0});a.a.qa=new b({bits:24,signed:!0});a.a.Fa=new b({bits:24});a.a.sa=new b({bits:32,signed:!0});a.a.V=new b({bits:32});a.a.ha=new b({bits:32,"float":!0});a.a.va=new b({bits:40,signed:!0});a.a.Ja=new b({bits:40});a.a.xa=new b({bits:48,signed:!0});a.a.La=new b({bits:48});a.a.ja=new b({bits:64,"float":!0});a.a.oa=new b({bits:16,signed:!0,be:!0});a.a.Da=new b({bits:16,
be:!0});a.a.ga=new b({bits:16,"float":!0,be:!0});a.a.ra=new b({bits:24,signed:!0,be:!0});a.a.Ga=new b({bits:24,be:!0});a.a.ta=new b({bits:32,signed:!0,be:!0});a.a.Ha=new b({bits:32,be:!0});a.a.ia=new b({bits:32,"float":!0,be:!0});a.a.wa=new b({bits:40,signed:!0,be:!0});a.a.Ka=new b({bits:40,be:!0});a.a.ya=new b({bits:48,signed:!0,be:!0});a.a.Ma=new b({bits:48,be:!0});a.a.ka=new b({bits:64,"float":!0,be:!0})},function(a,e,c){var d=c(0),k=c(5);a.a.l=function(a,b){a=Object.assign(new d({}),a);a.c=b;
return a};a.a.F=function(a,b){for(var c=0,d=0,g=a.length,f=[];c<g;)d=b.i(f,a[c++],d);b.j&&k(f,b.offset);if(10!=b.c){a=b.c;c=0;for(d=f.length;c<d;)f[c]=f[c].toString(a),c++;a=0;c=f.length;for(b=(2==b.c?8:2)+1;a<c;)f[a]=Array(b-f[a].length).join("0")+f[a],a++}return f};a.a.w=function(a,c){c.j&&k(a,c.offset);if(10!=c.c)for(var b=c.c,d=0,e=a.length;d<e;)a[d]=parseInt(a[d],b),d++;b=[];d=0;for(e=a.length-(c.offset-1);d<e;)b.push(c.h(a,d)),d+=c.offset;c.char&&(b=b.join(""));return b}},function(a){function e(a){this.b=
a.bits;this.j=a.be;this.U=a.signed;this.h=this.read;this.i=this.write;this.offset=0;this.min=-Infinity;this.max=Infinity;this.g=this.b;this.o=255;this.A()}e.prototype.read=function(a,d){d=void 0===d?0:d;if(32<this.b)return this.B(a,d);for(var c=0,e=this.offset-1;0<e;)c|=a[e+d]<<8*e,e--;c=(a[d]|c)>>>0;return this.f(this.u(c))};e.prototype.write=function(a,d,e){d=this.f(d);var c=255;e=this.X(a,d,void 0===e?0:e);for(var b=2;b<=this.offset;b++)b==this.offset&&(c=this.o),a[e++]=Math.floor(d/Math.pow(2,
8*(b-1)))&c;return e};e.prototype.B=function(a,d){d=void 0===d?0:d;for(var c="",e=0;e<this.offset;){var b=a[d+e].toString(2);c=Array(9-b.length).join("0")+b+c;e++}return this.f(this.u(parseInt(c,2)))};e.prototype.A=function(){this.W();this.R();this.C();this.L();this.offset=8>this.b?1:Math.ceil(this.g/8)};e.prototype.u=function(a){a>this.max&&(a-=2*this.max+2);return a};e.prototype.f=function(a){a>this.max?a=this.max:a<this.min&&(a=this.min);return a};e.prototype.L=function(){var a=Math.pow(2,this.b);
this.U?(this.max=a/2-1,this.min=-a/2):(this.max=a-1,this.min=0)};e.prototype.W=function(){if(1>this.b||64<this.b)throw Error("Not a supported type.");};e.prototype.R=function(){8<this.b&&(this.g=(this.b-1|7)+1)};e.prototype.C=function(){var a=8-(this.g-this.b);this.o=Math.pow(2,0<a?a:8)-1};e.prototype.X=function(a,d,e){8>this.b?a[e++]=0>d?d+Math.pow(2,this.b):d:a[e++]=d&255;return e};a.a=e},function(a){a.a=function(a,c){for(var d=a.length,e=0;e<d;){for(var g=a,b=e,h=0,l=c-1,m=parseInt(c/2,10);h<m;){var f=
g[b+h];g[b+h]=g[b+l];g[b+l]=f;h++;l--}e+=c}}}]);
